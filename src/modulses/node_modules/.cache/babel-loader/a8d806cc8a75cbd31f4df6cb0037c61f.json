{"remainingRequest":"E:\\python\\hz\\mq-admin\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js!E:\\python\\hz\\mq-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!E:\\python\\hz\\mq-admin\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\python\\hz\\mq-admin\\src\\components\\Summernote\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\python\\hz\\mq-admin\\src\\components\\Summernote\\index.vue","mtime":1608694218757},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n\n/* eslint-disable */\nimport $ from 'jquery';\nimport 'bootstrap/dist/js/bootstrap.min';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport 'summernote';\nimport 'summernote/dist/lang/summernote-zh-CN';\nimport 'summernote/dist/summernote.css';\nimport { getToken, uploadFile, deleteFile } from '@/api/qiniu';\nimport { qiniuHost, cdnHost } from '@/api/utils';\nimport lrz from 'lrz';\nimport moment from 'moment';\nexport default {\n  name: 'Summernote',\n  props: {\n    value: String\n  },\n  data: function data() {\n    return {// richContent: \"\"\n    };\n  },\n  methods: {\n    setContent: function setContent(value) {\n      $('#summernote').summernote('code', value);\n    }\n  },\n  mounted: function mounted() {\n    var that = this;\n    $('#summernote').summernote({\n      lang: 'zh-CN',\n      placeholder: '请输入内容',\n      height: 400,\n      width: '100%',\n      htmlMode: true,\n      toolbar: [// ['style', ['bold', 'italic', 'underline', 'clear']],\n      // ['fontsize', ['fontsize']],\n      // ['fontname', ['fontname']],\n      // ['color', ['color']],\n      // ['para', ['ul', 'ol', 'paragraph']],\n      // ['insert', ['link', 'picture']],\n      // ['mybutton', ['myVideo']],\n      ['edit', ['undo', 'redo']], //编辑\n      ['headline', ['style']], //大字标题\n      ['style', ['bold', 'italic', 'underline', 'superscript', 'subscript', 'strikethrough', 'clear']], //样式\n      ['fontface', ['fontname', 'color', 'fontsize']], //字体\n      ['para', ['ul', 'ol', 'paragraph', 'lineheight']], //对齐方式\n      ['height', ['height']], //行高(自定义行高时一定不要忘记写这个)\n      ['table', ['table']], //表单\n      ['insert', ['link', 'picture', 'hr']], //插入链接，图片，下划线\n      ['view', ['fullscreen', 'codeview']] //全屏，代码视图\n      ],\n      fontSizes: ['8', '9', '10', '11', '12', '14', '18', '24', '36'],\n      fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New', 'Helvetica Neue', 'Helvetica', 'Impact', 'Lucida Grande', 'Tahoma', 'Times New Roman', 'Verdana'],\n      buttons: {\n        myVideo: myVideoBtn\n      },\n      callbacks: {\n        onChange: function onChange() {\n          that.$emit('input', $('#summernote').summernote('code'));\n        },\n        onImageUpload: function onImageUpload(files) {\n          getToken().then(function (data) {\n            for (var i = 0; i < files.length; i++) {\n              var formData = new FormData();\n              formData.append('token', data.qiniu_token);\n              formData.append('key', 'Summernote/' + moment().format('x'));\n              formData.append('file', files.item(i));\n              uploadFile(formData).then(function (response) {\n                console.log(cdnHost + response.key);\n                $('#summernote').summernote('insertImage', cdnHost + response.key, response.key);\n              });\n            }\n          }); // for(var key in files){\n          //   lrz(files[key], { quality: 0.7 }).then((res) => {\n          //     getToken().then(data => {\n          //       uploadBase64(res.base64.replace('data:image/jpeg;base64,', ''), res.fileLen, data.qiniu_token).then(response => {\n          //         console.log('成功')\n          //         // var img=document.createElement('img');// @param {Node} node\n          //         // img.src=cdnHost + response.key\n          //         // $('#summernote').summernote('insertNode',img);\n          //         //$('#summernote').summernote('insertImage', cdnHost + response.key,response.key)\n          //       })\n          //     })\n          //   })\n          // }\n          // files.forEach(element => {\n          //   lrz(request.file, { quality: 0.7 }).then((res) => {\n          //     getToken().then(data => {\n          //       uploadBase64(res.base64.replace('data:image/jpeg;base64,', ''), res.fileLen, data.qiniu_token).then(response => {\n          //          $('#summernote').summernote('insertImage', cdnHost + response.key)\n          //       })\n          //     })\n          //   })\n          // })\n        }\n      }\n    });\n    $('#summernote').summernote('code', that.value); // mounted中加入下面这段\n\n    window.uploadVideo = function () {\n      vm.showLoading = true; // 因ship上传比较耗时，所以加了个loading提示\n\n      upload($('#video')[0].files[0]).then(function (url) {\n        // upload是自定义的上传文件函数，这里是上传成功的回调，拿到视频的url\n        var node = document.createElement('div'); // 创建节点，用于包裹视频，再加这一层是方便调视频样式\n\n        node.innerHTML = '<video controls=\"controls\" style=\"max-width:100%;\" src=\"' + url + '\" />';\n        node.cssText = 'width:100%;text-aligen:center;';\n        $('#summernote').summernote('insertNode', node); // 插入视频\n\n        vm.showLoading = false; // 视频上传结束，去掉loading提示\n      });\n    };\n\n    var myVideoBtn = function myVideoBtn(context) {\n      var ui = $.summernote.ui; // create button\n\n      var button = ui.button({\n        contents: '<i class=\"rich-video-icon\"/><input title=\"视频\" οnchange=\"uploadVideo()\" type=\"file\" id=\"videoInput\" accept=\"video/*\" style=\"opacity: 0; filter:Alpha(opacity=0);width:20px;height: 20px;margin-left: -20px;position:absolute;\">' // 这个是展示在富文本顶部的操作图标，这个rich-video-icon是自己写的\n        // tooltip: ''// todo 这个视频提示报错，未知原因\n        // click: function() {// 点击按钮触发事件，这边不需要用到\n        // context.invoke('editor.insertText', 'xxx')\n        // }\n\n      });\n      return button.render(); // return button as jquery object\n    };\n  }\n};",null]}