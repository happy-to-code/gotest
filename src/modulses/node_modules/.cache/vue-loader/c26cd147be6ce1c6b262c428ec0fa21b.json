{"remainingRequest":"E:\\python\\hz\\mq-admin\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js??vue-loader-options!E:\\python\\hz\\mq-admin\\src\\views\\page\\team\\detail.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\python\\hz\\mq-admin\\src\\views\\page\\team\\detail.vue","mtime":1608694218901},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\python\\hz\\mq-admin\\node_modules\\_vue-loader@15.9.6@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getInfo } from '@/api/team'\r\nimport { designStyles, cdnHost, homeOptions, typeOptions } from '@/api/utils'\r\nimport moment from 'moment'\r\nimport { createSubscribe, getSubscribeCount } from '@/api/subscribe'\r\nexport default {\r\n    data() {\r\n        return {\r\n            typeOptions: typeOptions,\r\n            model: null,\r\n            cdnHost: cdnHost,\r\n            nav: null,\r\n            count: 0,\r\n            postForm: {\r\n              name: '',\r\n              phone: '',\r\n              area: '',\r\n              address: '',\r\n              page: '',\r\n              update_time: moment().format('YYYY-MM-DD HH:mm:ss'),\r\n              status: 0\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n      this.getCount()\r\n      let interval = setInterval(() => {\r\n      if (!this.nav) {\r\n        this.nav = this.$store.getters.activeNav;\r\n      } else {\r\n        clearInterval(interval);\r\n      }\r\n    }, 10);\r\n        this.get()\r\n    },\r\n    methods: {\r\n         get() {\r\n            const id = this.$route.params && this.$route.params.id\r\n            getInfo({id: id}).then(res => {\r\n                if (res.code === 200) {\r\n                    this.model = res.data\r\n                }\r\n            })\r\n        },\r\n        getType(value) {\r\n            let type = ''\r\n            homeOptions.forEach(element => {\r\n                if (element.value === value) {\r\n                    type = element.label\r\n                }\r\n            })\r\n            return type\r\n        },\r\n        getDesignStyle(value) {\r\n            let style = ''\r\n            designStyles.forEach(element => {\r\n                if (element.value === value) {\r\n                    style = element.label\r\n                }\r\n            })\r\n            return style\r\n        },\r\n     add(){\r\n       this.postForm.page=this.model.name\r\n      if(!this.postForm.name||!this.postForm.phone||!this.postForm.address){\r\n        alert('请将信息填写完整！')\r\n        return\r\n      }\r\n      if(this.postForm.phone.length!=11){\r\n        alert('请填写正确的手机号码！')\r\n        return\r\n      }\r\n      createSubscribe(this.postForm).then(res => {\r\n                if (res.code === 200) {\r\n                  alert('预约成功！')\r\n                  this.getCount()\r\n                  this.bouncedUser = '-1'\r\n                  this.postForm = {\r\n                    name: '',\r\n                    phone: '',\r\n                    area: '',\r\n                    address: '',\r\n                    page: this.model.name,\r\n                    update_time: moment().format('YYYY-MM-DD HH:mm:ss'),\r\n                    status: 0\r\n                  }\r\n                }\r\n            })\r\n    },\r\n     getCount(){\r\n      getSubscribeCount().then(res =>{\r\n        console.log(res)\r\n        if(res.code == 200){\r\n           this.count = res.data\r\n        }\r\n\r\n      })\r\n    }\r\n    }\r\n}\r\n",null]}